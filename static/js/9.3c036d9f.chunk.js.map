{"version":3,"sources":["components/common/Button.jsx","components/FeedbackPage/FeedbackPage.jsx","components/FeedbackPage/index.jsx"],"names":["Button","Styled","button","_templateObject","FeedbackPage","div","Label","span","_templateObject2","Picker","_templateObject3","Textarea","textarea","_templateObject4","_templateObject5","Upload","_templateObject6","typeList","label","value","PickerInput","props","react_default","a","createElement","FeedbackPage_FeedbackPage","onClick","extra","src","alt","UploadInput","className","type","accept","multiple","onChange","substance","imgList","v","_toConsumableArray","_this","setState","_ref","target","_ref2","files","length","state","toast_default","info","i","loading","uploadImage","limit","setTimeout","file","fn","self","_assertThisInitialized","reader","FileReader","readAsDataURL","onload","result","this","prevState","push","window","confirm","_this$state","_this$props","location","history","replace","concat","search","React","PureComponent","Helmet","picker_default","data","onOk","pickType","cols","FeedbackPage_PickerInput","onInput","placeholder","map","img","index","key","FeedbackPage_UploadInput","uploadFiles","submit"],"mappings":"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","file":"static/js/9.3c036d9f.chunk.js","sourcesContent":["import Styled from 'styled-components';\r\n\r\nconst Button = Styled.button`\r\n    width: 100%;\r\n    padding: 0.32rem 0;\r\n    color: #FFFFFF;\r\n    font-size: 0.4rem;\r\n    background-color: #4EA0FF;\r\n    border: none;\r\n    border-radius: 3px;\r\n\r\n    &.D {\r\n        background-color: #D8D8D8;\r\n    }\r\n`;\r\n\r\nexport default Button;","import Styled from \"styled-components\";\r\nimport Button from \"components/common/Button\";\r\n\r\nconst FeedbackPage = Styled.div`\r\n    padding: 1.0667rem 0.8rem 0;\r\n    background-color: #FFFFFF;\r\n\r\n    .Fx {\r\n        display: flex;\r\n        flex-wrap: wrap;\r\n        align-items: center;\r\n    }\r\n\r\n    .Tp div:nth-of-type(1) {\r\n        flex-grow: 1;\r\n        margin-left: 0.4rem;\r\n    }\r\n\r\n    .Tt {\r\n        margin: 0.2667rem 0;\r\n    }\r\n\r\n    .Up {\r\n        margin: 0 calc(((100% - 7.68rem) / -8));\r\n\r\n        & > div {\r\n            width: 1.92rem;\r\n            height: 1.92rem;\r\n            margin: 0 calc((100% - 7.68rem) / 8) 0.2667rem;\r\n            border: 1px solid #F5F5F5;\r\n            border-radius: 2px;\r\n        }\r\n\r\n        img {\r\n            width: 100%;\r\n            height: 100%;\r\n            border-radius: 2px;\r\n            display: block;\r\n        }\r\n    }\r\n`;\r\n\r\nFeedbackPage.Label = Styled.span`\r\n    color: #4A4A4A;\r\n    font-size: 0.4rem;\r\n    display: block;\r\n`;\r\n\r\nFeedbackPage.Picker = Styled.div`\r\n    height: 0.96rem;\r\n    padding-left: 0.5334rem;\r\n    color: #3896F7;\r\n    font-size: 0.3734rem;\r\n    line-height: 0.5867rem;\r\n    border: 1px solid #E4E5E8;\r\n    border-radius: 2px;\r\n    display: flex;\r\n    align-items: center;\r\n    position: relative;\r\n\r\n    img {\r\n        right: 0.32rem;\r\n        top: 0.2667rem;\r\n        height: 0.3734rem;\r\n        display: block;\r\n        position: absolute;\r\n    }\r\n`;\r\n\r\nFeedbackPage.Textarea = Styled.textarea`\r\n    width: 100%;\r\n    height: 3.2rem;\r\n    padding: 0.2667rem 0.32rem 0.2667rem 0.2667rem;\r\n    color: #4A4A4A;\r\n    font-size: 0.32rem;\r\n    line-height: 0.4534rem;\r\n    border: 1px solid #DDDDDD;\r\n    border-radius: 2px;\r\n    resize: none;\r\n\r\n    &::-webkit-input-placeholder { \r\n        color: #B8B5B5; \r\n    } \r\n    &:-moz-placeholder { \r\n        color: #B8B5B5; \r\n    } \r\n    &::-moz-placeholder { \r\n        color: #B8B5B5; \r\n    } \r\n    &:-ms-input-placeholder { \r\n        color: #B8B5B5; \r\n    } \r\n`;\r\n\r\nFeedbackPage.Button = Styled(Button)`\r\n    margin-top: 0.5334rem;\r\n`;\r\n\r\nFeedbackPage.Upload = Styled.div`\r\n    width: 1.92rem;\r\n    height: 1.92rem;\r\n    border: 1px dashed #D8D8D8;\r\n    border-radius: 2px;\r\n    position: relative;\r\n\r\n    div {\r\n        top: 50%;\r\n        left: 50%;\r\n        background-color: #D8D8D8;\r\n        position: absolute;\r\n    }\r\n\r\n    .H {\r\n        width: 0.9334rem;\r\n        height: 0.0534rem;\r\n        margin-top: -0.0267rem;\r\n        margin-left: -0.4667rem;\r\n    }\r\n\r\n    .V {\r\n        width: 0.0534rem;\r\n        height: 0.9334rem;\r\n        margin-top: -0.4667rem;\r\n        margin-left: -0.0267rem;\r\n    }\r\n\r\n    input {\r\n        width: 100%;\r\n        height: 100%;\r\n        opacity: 0;\r\n        display: block;\r\n    }\r\n`;\r\n\r\nexport default FeedbackPage;\r\n","import React from \"react\";\r\nimport { Helmet } from \"react-helmet\";\r\nimport { Picker, Toast } from \"antd-mobile\";\r\nimport FeedbackPage from \"./FeedbackPage\";\r\n\r\nconst typeList = [\r\n  {\r\n    label: \"身份认证多次未通过\",\r\n    value: 1\r\n  },\r\n  {\r\n    label: \"纠错信息\",\r\n    value: 2\r\n  },\r\n  {\r\n    label: \"补全信息\",\r\n    value: 3\r\n  },\r\n  {\r\n    label: \"其他原因\",\r\n    value: 4\r\n  }\r\n];\r\n\r\nconst PickerInput = props => (\r\n  <FeedbackPage.Picker onClick={props.onClick}>\r\n    {props.extra}\r\n    <img\r\n      src=\"https://file.yuchuantech.com/xiaobaiapp/arrow.png\"\r\n      alt=\"arrow\"\r\n      onClick={() => false}\r\n    />\r\n  </FeedbackPage.Picker>\r\n);\r\n\r\nconst UploadInput = props => (\r\n  <FeedbackPage.Upload>\r\n    <div className=\"H\" />\r\n    <div className=\"V\" />\r\n    <input\r\n      type=\"file\"\r\n      accept=\"image/*;capture=camera\"\r\n      multiple=\"multiple\"\r\n      onChange={props.onChange}\r\n    />\r\n  </FeedbackPage.Upload>\r\n);\r\n\r\nexport default class extends React.PureComponent {\r\n  state = {\r\n    type: [],\r\n    substance: \"\",\r\n    imgList: []\r\n  };\r\n  pickType = v => {\r\n    const type = [...v];\r\n    this.setState({ type });\r\n  };\r\n  onInput = ({ target }) => {\r\n    this.setState({\r\n      substance: target.value\r\n    });\r\n  };\r\n  uploadFiles = ({ target }) => {\r\n    if (target.files.length > 0) {\r\n      if (target.files.length + this.state.imgList.length > 6) {\r\n        Toast.info(\"最多反馈6张图片！\", 2);\r\n      } else {\r\n        let i = 0;\r\n        Toast.loading(\"正在上传图片...\", 0);\r\n        const limit = () => {\r\n          i++;\r\n          if (i < target.files.length) {\r\n            this.uploadImage(target.files[i], limit);\r\n          } else {\r\n            setTimeout(() => {\r\n              Toast.info(\"上传成功！\", 2);\r\n            }, 1000);\r\n          }\r\n        };\r\n        this.uploadImage(target.files[i], limit);\r\n      }\r\n    }\r\n  };\r\n  uploadImage = (file, fn) => {\r\n    const self = this;\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n    reader.onload = function () {\r\n      const { result } = this;\r\n      self.setState(prevState => {\r\n        const imgList = [...prevState.imgList];\r\n        imgList.push(result);\r\n        return { imgList }\r\n      });\r\n      setTimeout(() => {\r\n        fn();\r\n      }, 1);\r\n    }\r\n  };\r\n  submit = () => {\r\n    const submit = window.confirm(\"确认提交反馈吗？\");\r\n    if (submit) {\r\n      const { type, substance } = this.state;\r\n      const { location, history } = this.props;\r\n      if (type.length === 0) {\r\n        Toast.info(\"请选择申请类型！\", 2);\r\n        return;\r\n      }\r\n      if (!substance) {\r\n        Toast.info(\"详细说明不能为空！\", 2);\r\n        return;\r\n      }\r\n      Toast.loading(\"正在提交反馈...\", 0);\r\n      setTimeout(() => {\r\n        Toast.info(\"提交成功！\", 1.6);\r\n        history.replace(`/my/feedbacks${location.search}`);\r\n      }, 600);\r\n    }\r\n  };\r\n  render() {\r\n    return (\r\n      <FeedbackPage>\r\n        <Helmet>\r\n          <title>异议申请</title>\r\n        </Helmet>\r\n        <div className=\"Fx Tp\">\r\n          <FeedbackPage.Label>申请类型</FeedbackPage.Label>\r\n          <Picker\r\n            data={typeList}\r\n            value={this.state.type}\r\n            onOk={this.pickType}\r\n            cols=\"1\"\r\n          >\r\n            <PickerInput />\r\n          </Picker>\r\n        </div>\r\n        <div className=\"Tt\">\r\n          <FeedbackPage.Label>详细说明</FeedbackPage.Label>\r\n        </div>\r\n        <div>\r\n          <FeedbackPage.Textarea\r\n            onInput={this.onInput}\r\n            placeholder=\"请您具体说明发生错误的标题及显示结果，以及应该显示的数据结果\"\r\n          />\r\n        </div>\r\n        <div className=\"Tt\">\r\n          <FeedbackPage.Label>上传截图（最多6张）</FeedbackPage.Label>\r\n        </div>\r\n        <div className=\"Fx Up\">\r\n          {this.state.imgList.map((img, index) => (\r\n            <div key={index}>\r\n              <img\r\n                src={img}\r\n                alt={index}\r\n              />\r\n            </div>\r\n          ))}\r\n          <UploadInput onChange={this.uploadFiles} />\r\n        </div>\r\n        <FeedbackPage.Button onClick={this.submit}>提交</FeedbackPage.Button>\r\n      </FeedbackPage>\r\n    );\r\n  }\r\n}\r\n"],"sourceRoot":""}